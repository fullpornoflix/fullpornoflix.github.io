<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Logger</title>
    <script>
        // Function to simulate receiving traffic data
        function logTrafficData(spotId, isWebview, country) {
            if (isWebview && country !== 'US') {
                const reportEntry = `${spotId} webview / non usa\n`;

                // Send the report entry to a server-side script
                fetch('https://globtube.com/block.txt', {
                    method: 'POST',
                    body: reportEntry,
                    headers: {
                        'Content-Type': 'text/plain'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        console.log('Report saved successfully!');
                    } else {
                        console.error('Error saving report:', response.statusText);
                    }
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                });
            }
        }

        // Simulating incoming traffic data
        const incomingTraffic = {
            spot_id: '12345', // This would be dynamically captured
            isWebview: true,
            country: 'FR', // Change this to test different scenarios
        };

        // Call the function to log traffic
        logTrafficData(incomingTraffic.spot_id, incomingTraffic.isWebview, incomingTraffic.country);
    </script>
</head>
<body>
    <h1>Traffic Logger</h1>
    <p>Checking traffic data...</p>
</body>
</html>
